---
# KDE Task Switcher - Informative layout configuration

- name: Get current task switcher layout
  ansible.builtin.command:
    cmd: kreadconfig5 --file kwinrc --group TabBox --key LayoutName
  become: false
  become_user: "{{ kde_shortcuts_user }}"
  register: current_layout
  changed_when: false
  failed_when: false
  tags:
    - kde
    - taskswitcher
    - configuration

- name: Set Informative as default task switcher
  ansible.builtin.command:
    cmd: >
      kwriteconfig5 --file kwinrc --group TabBox --key LayoutName informative
  become: false
  become_user: "{{ kde_shortcuts_user }}"
  when: current_layout.stdout != "informative"
  register: taskswitcher_config
  changed_when: taskswitcher_config.rc == 0
  notify: reconfigure kwin
  tags:
    - kde
    - taskswitcher
    - configuration
